<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
  <title>LogSieve ‚Äî single‚Äëfile web app</title>
  <link rel="stylesheet" href="logsieve.css">
</head>
<body>
  <header>
    <div class="header-top">
      <div class="dropdown-group">
        <div class="dropdown">
          <button class="btn dropdown-toggle" id="linksDropdown">Links ‚ñº</button>
          <div class="dropdown-menu" id="linksMenu">
            <a href="https://github.com/notesofcliff/logsieve" target="_blank">Source Code</a>
            <a href="https://github.com/sponsors/notesofcliff" target="_blank">Sponsor</a>
            <a href="https://github.com/notesofcliff/logsieve/issues" target="_blank">Report an Issue</a>
          </div>
        </div>
        <div class="dropdown">
          <button class="btn dropdown-toggle" id="toolsDropdown">Tools ‚ñº</button>
          <div class="dropdown-menu" id="toolsMenu">
            <a href="regexlab.html">RegexLab</a>
            <div class="dropdown-submenu">
              <button class="dropdown-submenu-toggle">Library</button>
              <div class="dropdown-menu">
                <button id="exportLibrary">Export</button>
                <button id="importLibrary">Import</button>
              </div>
            </div>
            <div class="dropdown-submenu">
              <button class="dropdown-submenu-toggle">Data</button>
              <div class="dropdown-menu">
                <button id="exportJSON">JSON</button>
                <button id="exportCSV">CSV</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <h1>Logsieve</h1>
      <button class="btn theme-toggle" id="themeToggle" title="Toggle theme">
        <span class="theme-icon">‚òÄÔ∏è</span>
      </button>
      <input type="file" id="importFile" accept=".json" hidden />
    </div>
  </header>

  <div class="app-container">
    <!-- Sidebar removed ‚Äî navigation is now performed via section headers and Search Tools tabs -->

    <main class="main-content">
      <!-- Upload Section (moved to top) -->
      <section class="section-card active" id="section-upload" data-section="upload">
        <h2 class="section-header">
          <span>Upload</span>
        </h2>
        <div class="section-content">
          <div class="pad">
            <div id="drop" class="drop">
              Drag & drop a .log/.txt file here, or <button class="btn" id="pick">Browse‚Ä¶</button>
              <input type="file" id="file" accept=".log,.txt,.json,.ndjson,.csv" hidden />
            </div>
            <div id="uploadProgress" class="progress-container" style="display:none;">
              <div class="progress-bar">
                <div class="progress-fill" id="uploadProgressFill"></div>
              </div>
              <div class="progress-text" id="uploadProgressText">Parsing...</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Help Section -->
      <section class="section-card" id="section-help" data-section="help">
        <h2 class="section-header">
          <span>Help</span>
        </h2>
        <div class="section-content">
          <div class="pad">
            <div style="font-size:13px; line-height:1.6; color:var(--muted)">
              <h3 style="margin-top:0; font-size:15px; color:var(--ink)">Getting Started</h3>
              <p>LogSieve is a powerful log analysis tool that runs entirely in your browser. Use the section headers or Search Tools tabs to navigate between sections, and click section headers to expand/collapse them. The Results section is always visible so you can see your data while working.</p>
              
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Upload</h3>
              <p>Load your log files to start analyzing. LogSieve supports multiple formats:</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Plain text logs (.log, .txt)</strong> - Automatically detects timestamps, log levels, and multi-line events like stack traces</li>
                <li><strong>JSON files (.json)</strong> - Parses structured JSON data with automatic field mapping</li>
                <li><strong>NDJSON files (.ndjson)</strong> - Newline-delimited JSON for streaming logs</li>
                <li><strong>CSV files (.csv)</strong> - Imports tabular data with header row detection</li>
              </ul>
              <p><strong>How to use:</strong> Drag and drop your file onto the upload area, or click "Browse..." to select a file. All processing happens in your browser - no data is uploaded to any server.</p>
              
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Filters & Sort</h3>
              <p>Narrow down your logs to find exactly what you need. LogSieve now uses an extensible Query Builder for structured filtering plus an Advanced Query input for free-form queries. Both are applied together when you click <strong>Apply</strong>.</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Builder rules</strong> - Create structured rules by choosing a Field, Operator and Value. Use logical operators (AND/OR) between rules. The builder is the primary filter UI and is visible by default.</li>
                <li><strong>Advanced Query</strong> - Use the Advanced Query for free-form text search and regular expressions. This is now a full-width area below the Query Builder and is applied together with builder rules.</li>
                <li><strong>Sort</strong> - Order results by ID, timestamp, level, or any extracted field</li>
                <li><strong>Page Size</strong> - Control how many results appear per page (25-200)</li>
              </ul>
              <p><strong>Tip:</strong> Click <strong>Apply</strong> after changing filters; the Builder and Advanced Query are applied together to allow flexible AND/OR combinations. Use "Clear filters" to reset the builder and advanced query.</p>

              <h4 style="margin-top:1rem; font-size:14px; color:var(--ink)">Query Builder</h4>
              <p>The Query Builder is an intuitive way to create structured filters without needing to remember syntax. A rule contains three parts:</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Field</strong> - Choose a field (standard fields: <em>level</em>, <em>ts</em>, <em>message</em>, <em>raw</em> or any extracted field)</li>
                <li><strong>Operator</strong> - Operators are type-aware (text, numeric, date, array). Examples: equals, contains, &gt;, &lt;, before, after, between</li>
                <li><strong>Value</strong> - Enter or pick a value. For date fields the builder shows a datetime picker and the <strong>between</strong> operator displays two pickers (start and end)</li>
              </ul>
              <p>Use the logic selector between rules to chain them with <em>AND</em> or <em>OR</em>. Click the <strong>Add Rule</strong> button to add a new rule; builder changes do not automatically apply until you click <strong>Apply</strong>.</p>

              <h4 style="margin-top:1rem; font-size:14px; color:var(--ink)">Advanced Text Query</h4>
              <p>For users who prefer a textual interface, the Advanced Query supports a compact syntax to express field filters and boolean logic:</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><code>field:value</code> ‚Äî field matcher. For example: <code>level:ERROR</code></li>
                <li>Operators like <code>&gt;=</code>, <code>&lt;</code> and range queries like <code>ts:2025-11-13..2025-11-14</code> (see the syntax helper)</li>
                <li><code>AND</code> and <code>OR</code> combine expressions</li>
              </ul>
              <p><strong>Important:</strong> The Advanced Query is validated live but is only applied when you click <strong>Apply</strong>, keeping it separate from the builder. Saved filters remember both Builder rules and the Advanced Query.</p>

              <h4 style="margin-top:1rem; font-size:14px; color:var(--ink)">Timestamps & Timezones</h4>
              <p>LogSieve detects timestamp formats and tries to normalize them for consistent filtering and display. Key behaviors:</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li>If a timestamp includes an explicit timezone (e.g. <code>2025-11-13T10:30:00.000Z</code>), it is parsed as UTC and we convert it to your local timezone for display</li>
                <li>Naive timestamps (no timezone) like <code>2025-11-13 10:30:20.345</code> are treated as local timestamps</li>
                <li>The Results table shows timestamps in your detected local timezone; a small note above the table displays your current timezone</li>
                <li>Filtering and date comparisons are done using canonical ISO times, but the UI uses local time for input and display for better intuition</li>
              </ul>
              
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Extractor Library</h3>
              <p>Extract structured data from unstructured logs using regular expressions with named groups:</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Create Extractors</strong> - Click "+ New Extractor" to define a regex pattern with named groups like <code>(?&lt;user&gt;\w+)</code></li>
                <li><strong>Activate Extractors</strong> - Check the boxes next to extractors you want to use, then click "‚ñ∂ Run Active"</li>
                <li><strong>Apply Scope</strong> - Choose whether to apply extractors to "All rows" or only "Filtered rows"</li>
                <li><strong>Merge Strategy</strong> - Control how overlapping field names are handled when multiple extractors match:
                  <ul style="margin:4px 0; padding-left:20px">
                    <li><em>Last Wins</em> - Later extractors override earlier ones</li>
                    <li><em>First Wins</em> - Keep first captured value</li>
                    <li><em>Merge</em> - Combine values (currently same as last-wins)</li>
                  </ul>
                </li>
                <li><strong>Quick Test</strong> - Use the collapsible "Quick Test" section to try a pattern once without saving</li>
              </ul>
              <p style="margin-top:8px">When extractors create new fields, the builder will automatically surface unique values for that field as suggestions (click a value or use the datalist). This speeds up creating precise filters.</p>
              <p><strong>Tip:</strong> Extracted fields become sortable columns in the Results table and export cleanly to CSV/JSON.</p>
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Columns</h3>
              <p>The <strong>Columns</strong> panel (Search Tools ‚Üí Columns) lets you control which fields appear in the Results table and in what order.</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Show / hide:</strong> Use the checkboxes to toggle columns on or off. Columns are shown by default.</li>
                <li><strong>Reorder:</strong> Drag the ‚â° handle next to a column to move it ‚Äî the Results table will update to match the new order.</li>
                <li><strong>Persistence:</strong> Your column visibility and order are saved in your browser so they persist across sessions.</li>
                <li><strong>New fields:</strong> When extractors add new fields they will be appended to your column order so you can enable and reposition them.</li>
                <li><strong>Export:</strong> JSON and CSV exports respect the current column order and only include visible columns.</li>
              </ul>
              <p style="margin-top:6px; color:var(--muted); font-size:13px">Keyboard reordering is not currently implemented ‚Äî open an issue if you'd like keyboard accessibility added.</p>
              
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Saved Filters</h3>
              <p>Save and reuse filter combinations for common queries:</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Save Current Filter</strong> - After setting up filters in the Filters & Sort section, click "Save Current Filter"</li>
                <li><strong>Apply Saved Filter</strong> - Choose a saved filter from the dropdown and click "Load & Apply" to instantly apply those settings, or "Load into Filters" to load without applying</li>
                <li><strong>Manage Filters</strong> - Expand the Saved Filters details to edit names/descriptions or delete filters you no longer need</li>
              </ul>
              <p><strong>Tip:</strong> Filter presets capture all settings including builder rules, Advanced Query, and sort order.</p>
              <p>Saved filters persist both Builder rules and the text form of Advanced Query so you can reapply exact searches later. If a saved filter contains invalid settings (missing builder values, etc) we will restore as much as possible and leave blank fields for you to fix before reapplying.</p>
              
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Results</h3>
              <p>View and interact with your filtered log data. Above the table, get a quick overview:</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Statistics</strong> - See total row count and breakdown by log level (INFO, WARN, ERROR)</li>
                <li><strong>File Info</strong> - View the filename, total line count, and active filters</li>
                <li><strong>Timeline Sparkline</strong> - Visual chart showing log activity over time (grouped by minute)</li>
              </ul>
              <p>The table displays ID, Timestamp, Level, Message, and any extracted fields as columns. Navigate through results using pagination buttons or see current page info. Click "raw" details toggle on any row to see the original log line. Multi-line events like stack traces are kept together as single entries.</p>
              <p><strong>Note:</strong> Statistics update automatically whenever you apply filters or load new data.</p>
              <p><strong>Tip:</strong> This section is always visible so you can see your data while working with other sections.</p>

              <h4 style="margin-top:1rem; font-size:14px; color:var(--ink)">Tips & Troubleshooting</h4>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Timestamps off by a few hours?</strong> Confirm whether your log timestamps have a timezone (e.g., trailing <code>Z</code>). If so we convert them to your timezone for display. You can see the detected timezone above the results.</li>
                <li><strong>Builder rule shows no results</strong> - ensure you filled in a value for the rule. Empty rule values are ignored when applying to avoid unexpected matches.</li>
                <li><strong>Regex failing</strong> - test patterns in Quick Test first; named groups populate fields used in the Builder and results.</li>
              </ul>
              
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Import/Export</h3>
              <p>Share your work or backup your configuration:</p>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>Export Data</strong> - Save filtered results as JSON or CSV files under Tools > Data in the top header</li>
                <li><strong>Export Library</strong> - Backup all your extractors and saved filters to a JSON file under Tools > Library > Export</li>
                <li><strong>Import Library</strong> - Load extractors and filters from a JSON file under Tools > Library > Import (choose merge or replace)</li>
              </ul>
              <p><strong>Privacy:</strong> All data stays in your browser. Nothing is sent to any server. Extractors and filters are saved in localStorage.</p>
              
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Keyboard Shortcuts</h3>
              <ul style="margin:8px 0; padding-left:20px">
                <li><strong>ESC</strong> - Close any open modal dialog</li>
              </ul>
              
              <h3 style="margin-top:1.5rem; font-size:15px; color:var(--ink)">Theme</h3>
              <p>Click the üåô/‚òÄÔ∏è button in the top header to toggle between dark and light themes. Your preference is saved automatically.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Search Tools (tabs) - collapsed by default -->
      <section class="section-card" id="section-search" data-section="search">
        <h2 class="section-header">
          <span>Search Tools</span>
        </h2>
        <div class="section-content">
          <div class="pad">
            <div class="tabs">
              <div class="tab-nav" role="tablist">
                <button class="tab-btn active" role="tab" data-tab="help">Help</button>
                <button class="tab-btn" role="tab" data-tab="filters">Filters & Sort</button>
                <button class="tab-btn" role="tab" data-tab="extractors">Extractor Library</button>
                <button class="tab-btn" role="tab" data-tab="columns">Columns</button>
              </div>
              <div class="tab-panels">
                <div class="tab-panel" id="tab-help" role="tabpanel"></div>
                <div class="tab-panel" id="tab-filters" role="tabpanel" style="display:none"></div>
                <div class="tab-panel" id="tab-extractors" role="tabpanel" style="display:none"></div>
                <div class="tab-panel" id="tab-columns" role="tabpanel" style="display:none">
                  <div class="pad">
                    <h3 style="margin-top:0; font-size:15px">Columns</h3>
                    <p style="margin:6px 0 12px 0; color:var(--muted); font-size:13px">Toggle which columns are visible in the Results table.</p>
                    <div id="columnsList" class="library-list">
                      <div class="empty-state">No columns available yet. Load a file or run extractors to populate columns.</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Upload Section: moved to top to prioritize file selection -->

      <!-- Filters & Sort Section -->
      <section class="section-card" id="section-filters" data-section="filters">
        <h2 class="section-header">
          <span>Filters & Sort</span>
        </h2>
        <div class="section-content">
          <div class="pad">
            <!-- Saved Filters - collapsed by default and integrated into Filters & Sort -->
            <details id="savedFiltersDetails" style="margin-bottom:10px">
              <summary>Saved Filters</summary>
              <div style="margin-top:8px">
                <div style="margin-top:8px" id="savedFilterActions">
                  <button class="btn" id="loadSavedFilter">Load into Filters</button>
                  <button class="btn ghost" id="applySavedFilter">Load & Apply</button>
                </div>
                <div id="savedFilterProgress" class="progress-container" style="display:none; margin-top:8px;">
                  <div class="progress-bar">
                    <div class="progress-fill" id="savedFilterProgressFill"></div>
                  </div>
                  <div class="progress-text" id="savedFilterProgressText">Applying saved filter...</div>
                </div>
                <div id="filterList" class="library-list" style="margin-top:12px"></div>
              </div>
            </details>
            <!-- Saved filter selector below the collapsed section (always visible) -->
            <div style="margin-bottom:12px">
              <label class="wide">Choose a saved filter
                <select id="savedFilterSelect" style="width:100%; margin-top:6px">
                  <option value="">-- Select saved filter --</option>
                </select>
              </label>
            </div>
              <div class="flex" style="margin-top:10px">
                <span class="right pill" id="info">‚Äî</span>
              </div>
            <!-- Query Builder (initially hidden until toggled) -->
            <div id="filterBuilder" style="margin-top:16px; display:block;">
              <div id="rulesContainer"></div>
              <div style="margin-top:8px">
                <button class="btn" id="addFilterRule">+ Add Filter Rule</button>
                <button class="btn ghost" id="clearFilterRules">Clear Rules</button>
              </div>
              <div id="builderPreview" style="margin-top:10px; font-family:monospace; color:var(--muted)"></div>
            </div>
            <!-- Advanced Query: full width below the builder -->
            <div style="margin-top:18px">
              <label class="wide"> Advanced Text Query (applied in addition to Builder)
                <textarea id="textQuery" placeholder="Enter advanced query syntax (e.g. level:ERROR AND user:alice)" rows="3" style="width:100%; box-sizing:border-box; resize:vertical;"></textarea>
              </label>
              <div id="queryFields" style="margin-top:6px; display:flex; gap:8px; flex-wrap:wrap"></div>
              <div id="queryError" style="color: #ffb4b4; font-size:12px; margin-top:6px"></div>
            </div>
            <div class="controls">
              <!-- Advanced Query moved below the Builder; use it for complex text/regex conditions -->
              <!-- Level/From/To moved into Builder rules; use the builder to restrict by level and time -->
              <!-- Regex moved to Advanced Query details -->
              <label> Sort
                <select id="sort">
                  <option value="id">ID</option>
                  <option value="ts">Timestamp</option>
                  <option value="level">Level</option>
                </select>
              </label>
              <label> Order
                <select id="order">
                  <option value="desc">Desc</option>
                  <option value="asc">Asc</option>
                </select>
              </label>
              <label> Page size
                <select id="per">
                  <option>25</option>
                  <option selected>50</option>
                  <option>100</option>
                  <option>200</option>
                </select>
              </label>
            </div>
            <div id="filterProgress" class="progress-container" style="display:none;">
              <div class="progress-bar">
                <div class="progress-fill" id="filterProgressFill"></div>
              </div>
              <div class="progress-text" id="filterProgressText">Applying filters...</div>
            </div>
            <div class="flex" style="margin-top:18px">
              <button class="btn" id="apply">Apply</button>
              <button class="btn ghost" id="clear">Clear filters</button>
            </div>
            
            <!-- Save Current Filter moved to bottom of Filters & Sort -->
            <div class="flex" style="margin-top:12px">
              <button class="btn" id="saveCurrentFilter" title="Save the current filter settings as a preset">Save Current Filter</button>
              <span class="right pill" id="filterLibInfo">‚Äî</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Extractor Library Section -->
      <section class="section-card" id="section-extractors" data-section="extractors">
        <h2 class="section-header">
          <span>Extractor Library</span>
        </h2>
        <div class="section-content">
          <div class="pad">
            <div class="flex" style="margin-bottom:10px">
              <button class="btn" id="addExtractor" title="Create a new regex extractor">+ New Extractor</button>
              <button class="btn ghost" id="runActiveExtractors" title="Apply all checked extractors">Run Active</button>
              <label style="margin-left:10px"> Apply to
                <select id="extractScope" title="Choose whether to apply extractors to all rows or only filtered rows">
                  <option value="all">All rows</option>
                  <option value="filtered">Filtered rows</option>
                </select>
              </label>
              <span class="right pill" id="extractInfo">‚Äî</span>
            </div>
            <div id="extractorProgress" class="progress-container" style="display:none;">
              <div class="progress-bar">
                <div class="progress-fill" id="extractorProgressFill"></div>
              </div>
              <div class="progress-text" id="extractorProgressText">Running extractors...</div>
            </div>
            
            <div class="controls" style="margin-bottom:10px">
              <label> Merge Strategy
                <select id="mergeStrategy" title="How to handle when multiple extractors capture the same field">
                  <option value="last-wins">Last Wins - Later extractors override earlier ones</option>
                  <option value="first-wins">First Wins - Keep first captured value, skip later ones</option>
                  <option value="merge">Merge - Combine all values (same as last-wins)</option>
                </select>
              </label>
              <div style="font-size:0.85em; color:var(--muted); margin-top:5px; line-height:1.4">
                When multiple active extractors capture the same field name, this setting determines which value is kept.
              </div>
            </div>
            
            <div id="extractorList" class="library-list">
              <div class="empty-state">No extractors saved. Click "+ New Extractor" to create one.</div>
            </div>

            <details style="margin-top:15px">
              <summary style="cursor:pointer; font-weight:500">Quick Test (one-time pattern)</summary>
              <div class="controls" style="margin-top:10px">
                <label class="wide"> Pattern
                  <input type="text" id="extractPattern" placeholder="^\[(?<ts>[^\]]+)\]\s(?<level>\w+)\s(?<message>.*)$" />
                </label>
              </div>
              <div class="flex" style="margin-top:10px">
                <button class="btn" id="runExtract">Test Pattern</button>
              </div>
            </details>
            
          </div>
        </div>
      </section>

      <!-- Saved Filters moved into Filters & Sort (UI updated below) -->

      <!-- Summary merged into Results (see below) -->

      <!-- Results Section (Always Visible) -->
      <section class="section-card always-visible" id="section-results" data-section="results">
        <h2 class="section-header">
          <span>Results</span>
        </h2>
        <div class="section-content">
          <div class="pad">
            <div class="stats" style="margin-bottom:12px">
              <div class="stat"><div class="k">Rows</div><div class="v" id="sRows">0</div></div>
              <div class="stat ok"><div class="k">INFO</div><div class="v" id="sInfo">0</div></div>
              <div class="stat warn"><div class="k">WARN</div><div class="v" id="sWarn">0</div></div>
              <div class="stat err"><div class="k">ERROR</div><div class="v" id="sErr">0</div></div>
            </div>
            <div class="tags" style="margin-bottom:12px">
              <span class="tag" id="fileTag">no file</span>
              <span class="tag" id="countTag">0 lines</span>
              <span class="tag" id="filterTag">no filters</span>
            </div>
            <div style="margin-bottom:12px"><canvas id="spark"></canvas></div>
            <div class="flex" style="margin-bottom:8px">
              <div class="pagination">
                <button class="btn" id="first">‚èÆ</button>
                <button class="btn" id="prev">‚óÄ</button>
                <span class="pill" id="pageLabel">1 / 1</span>
                <button class="btn" id="next">‚ñ∂</button>
                <button class="btn" id="last">‚è≠</button>
              </div>
              <span class="right pill" id="renderInfo">‚Äî</span>
            </div>
            <div id="tzInfo" style="font-size:12px; color:var(--muted); margin-bottom:8px;">Times shown in UTC by default</div>
            <div class="table-container">
              <table>
                <thead>
                  <tr id="thead-row">
                    <th style="width:72px">ID</th>
                    <th style="width:210px">Timestamp (<span id="tzLabel">local</span>)</th>
                    <th style="width:120px">Level</th>
                    <th>Message</th>
                  </tr>
                </thead>
                <tbody id="tbody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Extractor Modal -->
  <div id="extractorModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="extractorModalTitle">New Extractor</h3>
        <button class="modal-close" id="closeExtractorModal">&times;</button>
      </div>
      <div class="modal-body">
        <label>Name
          <input type="text" id="extractorName" placeholder="e.g., Apache Access Log" />
        </label>
        <label>Pattern (regex with named groups)
          <textarea id="extractorPattern" rows="3" placeholder="^\[(?<ts>[^\]]+)\]\s(?<level>\w+)\s(?<message>.*)$"></textarea>
        </label>
        <label>Description (optional)
          <input type="text" id="extractorDesc" placeholder="Brief description of what this extracts" />
        </label>
        <label style="display:flex; align-items:center; gap:8px">
          <input type="checkbox" id="extractorEnabled" checked />
          <span>Enabled by default</span>
        </label>
      </div>
      <div class="modal-footer">
        <button class="btn ghost" id="cancelExtractor">Cancel</button>
        <button class="btn" id="saveExtractor">Save</button>
      </div>
    </div>
  </div>

  <!-- Filter Modal -->
  <div id="filterModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="filterModalTitle">Save Filter</h3>
        <button class="modal-close" id="closeFilterModal">&times;</button>
      </div>
      <div class="modal-body">
        <label>Name
          <input type="text" id="filterName" placeholder="e.g., Critical Errors" />
        </label>
        <label>Description (optional)
          <input type="text" id="filterDesc" placeholder="Brief description of this filter preset" />
        </label>
        <div class="filter-preview">
          <strong>Current filter settings:</strong>
          <div id="filterPreview" style="margin-top:8px; font-size:0.9em; color:var(--text-dim)"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn ghost" id="cancelFilter">Cancel</button>
        <button class="btn" id="saveFilter">Save</button>
      </div>
    </div>
  </div>

  <script src="logsieve.js"></script>
</body>
</html>